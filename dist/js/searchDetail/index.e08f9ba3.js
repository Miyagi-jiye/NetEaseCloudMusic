import{I as e,f as s,j as a,T as i,l as t}from"../vant/vant.52bb3d0f.js";import{P as l,Q as n,a4 as r,W as o,I as d,Z as u,X as c,G as m,U as g,V as p,C as v,S as f,u as _,M as h,L as y,a0 as w,r as k,ab as L,w as b,E as x,O as I,_ as R,$ as U,J as j,a2 as S}from"../@vue/@vue.94aa2a2d.js";import{_ as A}from"../../assets/index-bc50e15e.js";import{M as C}from"../index/index.904a4d39.js";import{F as z}from"../index/index.378bd863.js";import{u as D}from"../vue-router/vue-router.b68e67a8.js";import{P as M}from"../index/index.20016973.js";import{S as T}from"../index/index.59afc84a.js";import{b as B}from"../useFilter/useFilter.6545905c.js";import{u as V}from"../search/search.69c6af3c.js";import"../@vant/@vant.4990c6ed.js";import"../pinia/pinia.86e899a9.js";import"../nprogress/nprogress.6d8e6ba3.js";import"../form-data/form-data.01cb563f.js";import"../pinia-plugin-persistedstate/pinia-plugin-persistedstate.712c107f.js";import"../index/index.a7ba02c1.js";import"../axios/axios.c5318529.js";import"../index/index.9e232040.js";import"../Audio/Audio.6682df1b.js";import"../index/index.d71aba5c.js";import"../china-division/china-division.19bf229b.js";const N={class:"loader"};const P=A({},[["render",function(e,s){return l(),n("div",N)}],["__scopeId","data-v-4c9af5dd"]]),E=e=>(g("data-v-e19943b2"),e=e(),p(),e),H={class:"UserListItem"},q={class:"UserListItem__left__avatar"},F=["src"],O={class:"UserListItem__center__name"},Q={key:0,t:"1668774461542",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"10237",width:"14",height:"14"},$=[E((()=>o("path",{d:"M744.727273 651.636364c0-205.661091-166.702545-372.363636-372.363637-372.363637S0 445.975273 0 651.636364s166.702545 372.363636 372.363636 372.363636 372.363636-166.702545 372.363637-372.363636zM93.090909 651.636364c0-154.228364 125.044364-279.272727 279.272727-279.272728s279.272727 125.044364 279.272728 279.272728-125.044364 279.272727-279.272728 279.272727S93.090909 805.864727 93.090909 651.636364z",fill:"#75B9EB","p-id":"10238"},null,-1))),E((()=>o("path",{d:"M857.344 93.090909H698.181818a46.545455 46.545455 0 0 1 0-93.090909h279.272727a46.545455 46.545455 0 0 1 46.545455 46.545455v279.272727a46.545455 46.545455 0 0 1-93.090909 0V166.656L632.110545 465.454545 558.545455 391.889455 857.344 93.090909z",fill:"#75B9EB","p-id":"10239"},null,-1)))],G={key:1,t:"1668774602435",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"11317",width:"14",height:"14"},J=[E((()=>o("path",{d:"M554.666667 680.021333V768h128a42.666667 42.666667 0 0 1 0 85.333333h-128v128a42.666667 42.666667 0 0 1-85.333334 0v-128h-128a42.666667 42.666667 0 0 1 0-85.333333h128v-87.978667C300.949333 659.029333 170.666667 515.413333 170.666667 341.333333 170.666667 152.810667 323.477333 0 512 0s341.333333 152.810667 341.333333 341.333333c0 174.08-130.282667 317.696-298.666666 338.688zM256 341.333333c0 141.376 114.624 256 256 256s256-114.624 256-256S653.376 85.333333 512 85.333333 256 199.957333 256 341.333333z",fill:"#e8579a","p-id":"11318"},null,-1)))],K={key:0,class:"UserListItem__center__desc"},W={class:"UserListItem__right"},X=A({__name:"index",props:{config:{userId:Number,avatarUrl:String,nickname:String,gender:Number,signature:String,userType:Number,followed:Boolean,avatarDetail:Object},keyword:String},setup(e){const s=D();function a(e,a){s.push({path:e,query:a})}return(s,i)=>{const t=r("lazy");return l(),n("div",H,[o("div",{class:"UserListItem__left",onClick:i[0]||(i[0]=s=>a("/userListDetail",{id:e.config.userId}))},[d(o("img",q,null,512),[[t,e.config.avatarUrl+"?param=100y100"]]),e.config.avatarDetail?(l(),n("img",{key:0,class:"UserListItem__left__avatarDetail",src:e.config.avatarDetail.identityIconUrl,alt:""},null,8,F)):u("",!0)]),o("div",{class:"UserListItem__center",onClick:i[1]||(i[1]=s=>a("/userListDetail",{id:e.config.userId}))},[o("div",O,[o("span",null,c(e.config.nickname),1),1==e.config.gender?(l(),n("svg",Q,$)):u("",!0),2==e.config.gender?(l(),n("svg",G,J)):u("",!0)]),e.config.signature?(l(),n("div",K,c(e.config.signature),1)):u("",!0)]),o("div",W,[m(z,{followed:e.config.followed,id:e.config.userId},null,8,["followed","id"])])])}}},[["__scopeId","data-v-e19943b2"]]),Z={class:"ArtistListItem"},Y={alt:""},ee={class:"ArtistListItem__center__top"},se={class:"ArtistListItem__center__top__name"},ae={key:0,class:"ArtistListItem__center__top__desc"},ie={class:"ArtistListItem__center__bottom"},te={class:"ArtistListItem__center__bottom__desc"},le={class:"ArtistListItem__right"},ne=A({__name:"index",props:{config:{id:Number,name:String,followed:Boolean,picUrl:String,albumSize:Number,mvSize:Number},keyword:{type:String,required:!1}},setup(e){const s=e,a=D();function i(e,s){a.push({path:e,query:s})}return new RegExp(s.keyword,"g"),v(s.keyword),(s,a)=>{const t=r("lazy");return l(),n("div",Z,[o("div",{class:"ArtistListItem__left",onClick:a[0]||(a[0]=s=>i("/artistListDetail",{id:e.config.id}))},[d(o("img",Y,null,512),[[t,e.config.picUrl+"?param=100y100"]])]),o("div",{class:"ArtistListItem__center",onClick:a[1]||(a[1]=s=>i("/artistListDetail",{id:e.config.id}))},[o("div",ee,[o("span",se,c(e.config.name),1),e.config.alias[0]?(l(),n("span",ae,"("+c(e.config.alias[0])+")",1)):u("",!0)]),o("div",ie,[o("div",te,[o("span",null,"专辑数: "+c(e.config.albumSize),1),o("span",null,"mv数: "+c(e.config.mvSize),1)])])]),o("div",le,[m(z,{followed:e.config.followed,id:e.config.id},null,8,["followed","id"])])])}}},[["__scopeId","data-v-3cd27bd3"]]),re=e=>(g("data-v-86192a17"),e=e(),p(),e),oe={class:"AlbumListItem__left"},de={alt:""},ue=re((()=>o("div",{class:"disc"},null,-1))),ce=re((()=>o("div",{class:"mask"},null,-1))),me={class:"AlbumListItem__right"},ge=["innerHTML"],pe={key:1,class:"AlbumListItem__right__title"},ve={class:"AlbumListItem__right__artists"},fe=["innerHTML"],_e={key:1},he={class:"AlbumListItem__right__desc"},ye=A({__name:"index",props:{config:{id:Number,name:String,artists:Array,publishTime:Number,picUrl:String},keyword:String},setup(e){const s=e,a=D(),i=new RegExp(s.keyword,"g"),t=v(s.keyword);function u(e){return e.replace(i,'<span class="highlight">'+t+"</span>")}return(s,i)=>{const m=r("lazy");return l(),n("div",{class:"AlbumListItem",onClick:i[0]||(i[0]=s=>{return i="/albumListDetail",t={id:e.config.id},void a.push({path:i,query:t});var i,t})},[o("div",oe,[d(o("img",de,null,512),[[m,e.config.picUrl+"?param=100y100"]]),ue,ce,o("div",{class:"shadow",style:f("background-image: url("+e.config.picUrl+"?param=10y10)")},null,4)]),o("div",me,[_(t)?(l(),n("div",{key:0,class:"AlbumListItem__right__title",innerHTML:u(e.config.name)},null,8,ge)):(l(),n("div",pe,c(e.config.name),1)),o("div",ve,[h(" 作者： "),(l(!0),n(y,null,w(e.config.artists,(e=>(l(),n("span",null,[_(t)?(l(),n("span",{key:0,innerHTML:u(e.name)},null,8,fe)):(l(),n("span",_e,c(e.name),1))])))),256))]),o("div",he,[o("span",null,"发布日期："+c(_(B)(e.config.publishTime)),1)])])])}}},[["__scopeId","data-v-86192a17"]]),we={class:"searchDetail"},ke={class:"searchInput"},Le={class:"searchResult"},be=A({__name:"index",async setup(r){let u,c;const g=k(!1),p=k(!1),v=k(!1),{searchData:f,getSearch:h}=V();[u,c]=L((()=>h())),await u,c();const A=async e=>{f.searchParams.offset++,await h(),g.value=!1,"songs"==e&&f.searchResult.songs.length>=f.searchResult.songCount?(p.value=!0,console.log("单曲全部加载完成")):"albums"==e&&f.searchResult.albums.length>=f.searchResult.albumCount?(p.value=!0,console.log("专辑全部加载完成")):"artists"==e&&f.searchResult.artists.length>=f.searchResult.artistCount?(p.value=!0,console.log("歌手全部加载完成")):"playlists"==e&&f.searchResult.playlists.length>=f.searchResult.playlistCount?(p.value=!0,console.log("歌单全部加载完成")):"userlist"==e&&f.searchResult.userprofiles.length>=f.searchResult.userprofileCount?(p.value=!0,console.log("用户全部加载完成")):"mvs"==e&&f.searchResult.mvs.length>=f.searchResult.mvCount?(p.value=!0,console.log("MV全部加载完成")):p.value=!1},z=()=>{const e=document.querySelector(".searchDetail");e&&(e.scrollTop=0),f.searchParams.offset=1,p.value=!1,v.value=!0,setTimeout((()=>{h()}),0)};return b((()=>f.searchParams.type),(()=>{z()})),window.onbeforeunload=()=>{f.searchParams.offset=1,p.value=!1},x((()=>{setTimeout((()=>{v.value=!1,console.log("页面重新渲染完成")}),600)})),(r,u)=>{const c=e,h=s,k=a,L=i,b=t;return l(),n("div",we,[o("div",ke,[m(c,{name:"arrow-left",size:"22",onClick:u[0]||(u[0]=e=>r.$router.back())}),m(h,{modelValue:_(f).keyword,"onUpdate:modelValue":u[1]||(u[1]=e=>_(f).keyword=e),placeholder:"请输入搜索关键词","input-align":"center",shape:"round",clearable:!1,onKeydown:u[2]||(u[2]=I(R((e=>z()),["stop"]),["enter"]))},null,8,["modelValue"]),o("span",{class:"searchBtn",onClick:u[3]||(u[3]=e=>z())},"搜索")]),o("div",Le,[m(b,{active:_(f).searchParams.type,"onUpdate:active":u[16]||(u[16]=e=>_(f).searchParams.type=e),"line-width":"30px",class:"searchResult__top"},{default:U((()=>[m(L,{title:"单曲",name:1},{default:U((()=>[d(m(P,{style:{"margin-top":"20vh"}},null,512),[[j,1==v.value]]),d(m(k,{class:"searchResult__songs",loading:g.value,"onUpdate:loading":u[4]||(u[4]=e=>g.value=e),finished:p.value,"finished-text":"没有更多了",onLoad:u[5]||(u[5]=e=>A("songs"))},{default:U((()=>[(l(!0),n(y,null,w(_(f).searchResult.songs,((e,s)=>(l(),S(T,{key:e.id,config:e,index:s,keyword:_(f).keyword},null,8,["config","index","keyword"])))),128))])),_:1},8,["loading","finished"]),[[j,0==v.value]])])),_:1}),m(L,{title:"专辑",name:10},{default:U((()=>[d(m(P,{style:{"margin-top":"20vh"}},null,512),[[j,1==v.value]]),d(m(k,{class:"searchResult__albums",loading:g.value,"onUpdate:loading":u[6]||(u[6]=e=>g.value=e),finished:p.value,"finished-text":"没有更多了",onLoad:u[7]||(u[7]=e=>A("albums"))},{default:U((()=>[(l(!0),n(y,null,w(_(f).searchResult.albums,((e,s)=>(l(),S(ye,{key:e.id,config:e,keyword:_(f).keyword},null,8,["config","keyword"])))),128))])),_:1},8,["loading","finished"]),[[j,0==v.value]])])),_:1}),m(L,{title:"歌手",name:100},{default:U((()=>[d(m(P,{style:{"margin-top":"20vh"}},null,512),[[j,1==v.value]]),d(m(k,{class:"searchResult__artists",loading:g.value,"onUpdate:loading":u[8]||(u[8]=e=>g.value=e),finished:p.value,"finished-text":"没有更多了",onLoad:u[9]||(u[9]=e=>A("artists"))},{default:U((()=>[(l(!0),n(y,null,w(_(f).searchResult.artists,((e,s)=>(l(),S(ne,{key:e.id,config:e,keyword:_(f).keyword},null,8,["config","keyword"])))),128))])),_:1},8,["loading","finished"]),[[j,0==v.value]])])),_:1}),m(L,{title:"歌单",name:1e3},{default:U((()=>[d(m(P,{style:{"margin-top":"20vh"}},null,512),[[j,1==v.value]]),d(m(k,{class:"searchResult__playlists",loading:g.value,"onUpdate:loading":u[10]||(u[10]=e=>g.value=e),finished:p.value,"finished-text":"没有更多了",onLoad:u[11]||(u[11]=e=>A("playlists"))},{default:U((()=>[(l(!0),n(y,null,w(_(f).searchResult.playlists,((e,s)=>(l(),S(M,{key:e.id,config:e,keyword:_(f).keyword},null,8,["config","keyword"])))),128))])),_:1},8,["loading","finished"]),[[j,0==v.value]])])),_:1}),m(L,{title:"用户",name:1002},{default:U((()=>[d(m(P,{style:{"margin-top":"20vh"}},null,512),[[j,1==v.value]]),d(m(k,{class:"searchResult__users",loading:g.value,"onUpdate:loading":u[12]||(u[12]=e=>g.value=e),finished:p.value,"finished-text":"没有更多了",onLoad:u[13]||(u[13]=e=>A("userlist"))},{default:U((()=>[(l(!0),n(y,null,w(_(f).searchResult.userprofiles,((e,s)=>(l(),S(X,{key:e.id,config:e,keyword:_(f).keyword},null,8,["config","keyword"])))),128))])),_:1},8,["loading","finished"]),[[j,0==v.value]])])),_:1}),m(L,{title:"MV",name:1004},{default:U((()=>[d(m(P,{style:{"margin-top":"20vh"}},null,512),[[j,1==v.value]]),d(m(k,{class:"searchResult__mvs",loading:g.value,"onUpdate:loading":u[14]||(u[14]=e=>g.value=e),finished:p.value,"finished-text":"没有更多了",onLoad:u[15]||(u[15]=e=>A("mvs"))},{default:U((()=>[(l(!0),n(y,null,w(_(f).searchResult.mvs,((e,s)=>(l(),S(C,{key:e.id,config:e,keyword:_(f).keyword},null,8,["config","keyword"])))),128))])),_:1},8,["loading","finished"]),[[j,0==v.value]])])),_:1})])),_:1},8,["active"])])])}}},[["__scopeId","data-v-24f25b76"]]);export{be as default};
