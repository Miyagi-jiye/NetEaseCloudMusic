import{a}from"../axios/axios.c5318529.js";import{d as t,s as e}from"../pinia/pinia.86e899a9.js";import{a as s,r as n,c as o}from"../@vue/@vue.94aa2a2d.js";import{s as r,h as i}from"../vant/vant.52bb3d0f.js";const c=t("login",(()=>{const a=s({key:"",url:"",status:{code:801,message:"",cookie:""}}),t=s({phone:"",captcha:""}),e=s({phone:"",password:""}),r=n(!1),i=n(!1),c=n("");return o((()=>"test")),{QRCode:a,captchaLogin:t,passwordLogin:e,isLogin:r,isChecked:i,cookie:c,getQrKey:async function(){const t=await async function(){const{data:a}=await u({url:"/login/qr/key",method:"get",params:{timestamp:Date.now()}});return a.data}();a.key=t.unikey,console.log("二维码key",t)},getQrCreate:async function(){const t=await async function(a,t=!0){const{data:e}=await u({url:`/login/qr/create?key=${a}&qrimg=${t}`,method:"get",params:{timestamp:Date.now()}});return e.data}(a.key);a.url=t.qrurl,console.log("二维码链接",t)},getQrCheck:async function(){const t=await async function(a){const{data:t}=await u({url:`/login/qr/check?key=${a}`,method:"get",params:{timestamp:Date.now()}});return t}(a.key);return a.status=t,c.value=t.cookie,console.log("检查二维码",t),t},getSendCaptcha:async function(){const a=await async function(a){const{data:t}=await u({url:"/captcha/sent",method:"post",data:{phone:a,timestamp:Date.now()}});return t}(t.phone);return console.log("发送验证码",a),a},getLoginByCaptcha:async function(){const a=await async function(a,t){const{data:e}=await u({url:"/login/cellphone",method:"get",params:{phone:a,captcha:t}});return e}(t.phone,t.captcha);return c.value=a.cookie,console.log("验证码登录",a),a},getLoginByPassword:async function(){const a=await async function(a,t){const{data:e}=await u({url:"/login/cellphone",method:"get",params:{phone:a,password:t}});return e}(e.phone,e.password);return c.value=a.cookie,console.log("密码登录",a),a}}}),{persist:{paths:["isLogin","cookie"]}}),u=a.create({baseURL:"https://www.guowei.fun",withCredentials:!0});async function d(a){const{data:t}=await u({url:`/user/detail?uid=${a}`,method:"get"});return t}async function m(){const{cookie:a}=e(c()),{data:t}=await u({url:"/user/account",method:"get",params:{timestamp:Date.now(),cookie:encodeURIComponent(JSON.stringify(a.value))}});return t}async function l(){const{data:a}=await u({url:"/user/subcount",method:"get"});return a}async function p(a,{limit:t=30,offset:e=1}){const{data:s}=await u({url:`/user/playlist?uid=${a}`,method:"get",params:{limit:t,offset:(e-1)*t}});return s}async function g(a,t){const{data:e}=await u({url:`/follow?id=${a}&t=${t}`,method:"get"});return e}async function f(a){const{data:t}=await u({url:"/artist/detail",method:"get",params:{id:a}});return t}async function h(a,{order:t="hot",limit:e=50,offset:s=1}){const{data:n}=await u({url:`/artist/songs?id=${a}`,method:"get",params:{order:t,limit:e,offset:(s-1)*e}});return n}async function y(a,{limit:t=30,offset:e=1}){const{data:s}=await u({url:"/artist/album",method:"get",params:{id:a,limit:t,offset:(e-1)*t}});return s}async function w(a,{limit:t=30,offset:e=1}){const{data:s}=await u({url:"/artist/mv",method:"get",params:{id:a,limit:t,offset:(e-1)*t}});return s}async function k(a,t=8){const{data:e}=await u({url:"/playlist/detail",method:"get",params:{id:a,s:t}});return e}async function v(a,{limit:t,offset:e}){const{data:s}=await u({url:`/playlist/track/all?id=${a}`,method:"get",params:{limit:t,offset:(e-1)*t}});return s}async function b(a,t="standard"){const{cookie:s}=e(c()),{data:n}=await u({url:`/song/url/v1?id=${a}&level=${t}`,method:"post",data:{cookie:encodeURIComponent(JSON.stringify(s.value))}});return n}async function $(a,{limit:t,offset:e,type:s}){const{data:n}=await u({url:`/cloudsearch?keywords=${a}`,method:"get",params:{limit:t,offset:(e-1)*t,type:s}});return n}async function C(a=0){const{data:t}=await u({url:"/banner",method:"get",params:{type:a}});return t}async function x(a,t){const{data:e}=await u({url:"/homepage/block/page",method:"get",params:{refresh:t,cursor:a}});return e.data}async function L(){const{data:a}=await u({url:"/homepage/dragon/ball",method:"get"});return a}async function j(a=30){const{data:t}=await u({url:"/personalized",method:"get",params:{limit:a}});return t}async function q(a=10){const{data:t}=await u({url:"/personalized/newsong",method:"get",params:{limit:a}});return t}async function D(){const{data:a}=await u({url:"/album/newest",method:"get"});return a}async function B(a){const{data:t}=await u({url:"/song/detail",method:"get",params:{ids:a}});return t}async function Q(a){const{data:t}=await u({url:"/album",method:"get",params:{id:a}});return t}async function R(){const{data:a}=await u({url:"/search/hot/detail",method:"get"});return a}async function T(a){const{data:t}=await u({url:"/mv/detail",method:"get",params:{mvid:a}});return t}async function z(a,t){const{data:e}=await u({url:"/mv/url",method:"get",params:{id:a,r:t}});return e}async function P(a){const{data:t}=await u({url:"/video/detail",method:"get",params:{id:a}});return t}async function S(a){const{data:t}=await u({url:"/simi/mv",method:"get",params:{mvid:a}});return t}async function U(a){const{data:t}=await u({url:"/lyric",method:"get",params:{id:a}});return t}async function I(){const{data:a}=await u({url:"/recommend/songs",method:"get"});return a}async function J(){const{data:a}=await u({url:"/recommend/resource",method:"get"});return a}u.interceptors.request.use((function(a){return a}),(function(a){return console.log("请求错误",a),Promise.reject(a)})),u.interceptors.response.use((function(a){return a.data.cookie&&console.log("拦截到响应头cookie===>",{cookie:a.data.cookie}),a}),(function(a){const{isLogin:t,cookie:s}=e(c());switch(a.response.status){case 400:-462===a.response.data.code?(console.log(a.response.data.data.blockText,a.response.data.data.url),i({title:"😭很抱歉，触发了网易云盾",message:a.response.data.data.blockText??"触发网易云盾，请先前往验证手机号",allowHtml:!0,confirmButtonText:"前往验证",cancelButtonText:"不管它"}).then((()=>{window.open(a.response.data.data.url)})).catch((()=>{}))):r({type:"danger",message:a.response.data.message??a.response.data.msg??"请求参数错误"});break;case 401:r({type:"danger",message:a.response.data.message??a.response.data.msg??"无访问权限"});break;case 403:r({type:"danger",message:a.response.data.message??a.response.data.msg??"拒绝访问"});break;case 404:r({type:"danger",message:a.response.data.message??a.response.data.msg??"请求地址出错"}),t.value=!1,s.value=null;break;case 501:r({type:"danger",message:a.response.data.message??a.response.data.msg??"账号错误"});break;case 503:r({type:"danger",message:a.response.data.message??a.response.data.msg??"验证码错误"})}return Promise.reject(a)}));export{C as A,j as B,q as C,D,U as a,B as b,m as c,d,l as e,p as f,v as g,Q as h,z as i,S as j,g as k,f as l,T as m,h as n,y as o,k as p,w as q,R as r,b as s,$ as t,c as u,P as v,J as w,I as x,L as y,x as z};
