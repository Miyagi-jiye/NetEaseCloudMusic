import{I as s,F as e,e as a,t as o,u as t,s as r}from"../vant/vant.52bb3d0f.js";import{u as n}from"../vue-router/vue-router.b68e67a8.js";import{s as p}from"../pinia/pinia.86e899a9.js";import{u as l}from"../index/index.1b674fdb.js";import{_ as i}from"../../assets/index-04b0ac89.js";import{P as d,Q as u,W as m,G as c,$ as g,u as v,M as f,U as b,V as j}from"../@vue/@vue.94aa2a2d.js";import"../@vant/@vant.4990c6ed.js";import"../axios/axios.c5318529.js";import"../form-data/form-data.01cb563f.js";import"../nprogress/nprogress.6d8e6ba3.js";import"../pinia-plugin-persistedstate/pinia-plugin-persistedstate.712c107f.js";const h=s=>(b("data-v-58bbbe9c"),s=s(),j(),s),w={class:"password"},y=h((()=>m("span",null,"密码登录",-1))),x={class:"content"},_=h((()=>m("div",{class:"desc"},[m("span",null,"登录体验更多精彩"),m("span",null,"未注册手机号验证后自动创建账号")],-1))),V={style:{margin:"16px"}},k=i({__name:"index",setup(i){const{isLogin:b}=p(l()),{passwordLogin:j,getLoginByPassword:h}=l(),k=n();async function L(){console.log("表单验证通过");const s=await h();200==s.code?(r({type:"success",message:"登录成功"}),b.value=!0,j.phone="",j.password="",k.push({path:"/home"})):(j.phone="",j.password="",r({type:"danger",message:s.msg??s.message??"登录失败"}))}return(r,n)=>{const p=s,l=e,i=a,b=o,h=t;return d(),u("div",w,[m("div",{class:"top",onClick:n[0]||(n[0]=s=>r.$router.back())},[c(p,{name:"arrow-left",size:"23"}),y]),m("div",x,[_,c(h,{onSubmit:L},{default:g((()=>[c(i,{inset:""},{default:g((()=>[c(l,{modelValue:v(j).phone,"onUpdate:modelValue":n[1]||(n[1]=s=>v(j).phone=s),type:"number",name:"手机号",label:"手机号",placeholder:"手机号",rules:[{required:!0,pattern:/^(?:(?:\+|00)86)?1(?:(?:3[\d])|(?:4[5-79])|(?:5[0-35-9])|(?:6[5-7])|(?:7[0-8])|(?:8[\d])|(?:9[189]))\d{8}$/,message:"手机号格式错误"}]},null,8,["modelValue","rules"]),c(l,{modelValue:v(j).password,"onUpdate:modelValue":n[2]||(n[2]=s=>v(j).password=s),type:"password",name:"密码",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},null,8,["modelValue"])])),_:1}),m("div",V,[c(b,{round:"",block:"",type:"danger","native-type":"submit"},{default:g((()=>[f("登录")])),_:1})])])),_:1})])])}}},[["__scopeId","data-v-58bbbe9c"]]);export{k as default};
