import{d as s}from"../pinia/pinia.86e899a9.js";import{r as e,t}from"../index/index.1b674fdb.js";import{a as r,c as a}from"../@vue/@vue.94aa2a2d.js";const l=s("search",(()=>{const s=r({keyword:"",historyList:[],hotDetail:[],searchParams:{type:1,limit:30,offset:1},searchResult:{songs:[],songCount:0,albums:[],albumCount:0,artists:[],artistCount:0,playlists:[],playlistCount:0,userprofiles:[],userprofileCount:0,mvs:[],mvCount:0}});function l(){if(s.keyword){if(s.historyList.includes(s.keyword))return;s.historyList.push(s.keyword)}}return a((()=>"test")),{searchData:s,addHistory:l,getSearch:async function(){if(!s.keyword)return console.log("请输入搜索关键字");l();const e=await t(s.keyword,s.searchParams);if(1==s.searchParams.offset)console.log("🔍首次搜索",e.result),1==s.searchParams.type&&e.result.songs?(s.searchResult.songs=e.result.songs,s.searchResult.songCount=e.result.songCount):10==s.searchParams.type&&e.result.albums?(s.searchResult.albums=e.result.albums,s.searchResult.albumCount=e.result.albumCount):100==s.searchParams.type&&e.result.artists?(s.searchResult.artists=e.result.artists,s.searchResult.artistCount=e.result.artistCount):1e3==s.searchParams.type&&e.result.playlists?(s.searchResult.playlists=e.result.playlists,s.searchResult.playlistCount=e.result.playlistCount):1002==s.searchParams.type&&e.result.userprofiles?(s.searchResult.userprofiles=e.result.userprofiles,s.searchResult.userprofileCount=e.result.userprofileCount):1004==s.searchParams.type&&e.result.mvs?(s.searchResult.mvs=e.result.mvs,s.searchResult.mvCount=e.result.mvCount):console.log("偏移量错误");else if(console.log("🔄加载更多"),1==s.searchParams.type&&e.result.songs)s.searchResult.songs=s.searchResult.songs.concat(e.result.songs);else if(10==s.searchParams.type&&e.result.albums)s.searchResult.albums=s.searchResult.albums.concat(e.result.albums);else if(100==s.searchParams.type&&e.result.artists)s.searchResult.artists=s.searchResult.artists.concat(e.result.artists);else if(1e3==s.searchParams.type&&e.result.playlists)s.searchResult.playlists=s.searchResult.playlists.concat(e.result.playlists);else if(1002==s.searchParams.type&&e.result.userprofiles)s.searchResult.userprofiles=s.searchResult.userprofiles.concat(e.result.userprofiles);else{if(1004!=s.searchParams.type||!e.result.mvs)return console.log("❌没有更多数据了"),!1;s.searchResult.mvs=s.searchResult.mvs.concat(e.result.mvs)}return!0},getHotDetail:async function(){const t=await e();s.hotDetail=t.data,console.log("获取热门搜索详情",t)}}}),{persist:!0});export{l as u};
